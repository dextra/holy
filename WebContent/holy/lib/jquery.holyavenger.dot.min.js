(function($){$.holyavenger.parseDoT=function(template,context,callback){template=$(template);var selector=template.attr("id")?"#"+template.attr("id"):template.attr("selector");var domSelector=template.attr("dom");var dom;if(template.attr("target")){selector=eval(template.attr("target"))}if(domSelector&&context[domSelector]){dom=context[domSelector]}else{if(selector){dom=$(selector)}else{if(!template.attr("optional")){throw"<dot> requires id, selector or dom (in context)"}}}if(dom){if(!template.attr("append")){dom.html("")}var text=$.holyavenger.readText(template);template=doT.template(text);context.window=window;var result=template(context);if(result.exception){throw result.exception}dom.append(result)}callback()};$.holyavenger.addParsers({dot:$.holyavenger.parseDoT});$.fn.doT=function(template,ctx){var templateParsed=doT.template(template);var result=templateParsed(ctx);$(this).html(result);return this};$.fn.appendDoT=function(template,ctx){var templateParsed=doT.template(template);var result=templateParsed(ctx);$(this).append(result);return this}})(jQuery);